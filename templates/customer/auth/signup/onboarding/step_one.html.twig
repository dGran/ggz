{% extends 'customer/base.html.twig' %}

{% set whithoutHeader = true %}
{% set whithoutFooter = true %}

{% block title %}Hello TestController!{% endblock %}

{% block content %}
<div class="container mx-auto mt-10">
    <div class="flex flex-row">
        <p class="pl-16 font-lato text-4xl font-extrabold text-[#C4C4C4] tracking-wider">1/3</p>
    </div>
    <div class="flex flex-col mt-4">
        <div class="flex justify-center">
            <p class="font-ubuntu text-5xl font-bold text-purpleggz">Thanks for joining us!</p>
        </div>
        <div class="flex justify-center">
            <p class="font-lato text-xl font-bold text-blacktext">Complete your registration and start your journey!</p>
        </div>
        <div class="flex flex-col justify-center w-9/12 mx-auto mt-8">
            <div class="flex justify-center mt-4">
                <textarea style="width: 22rem;" id="message" rows="1" class="black-placeholder text-whiteblock p-2.5 pl-4 resize-none font-ubuntu text-blacktext bg-[#F2EDF6] border-b-2 border-[#303030] rounded-t-md focus:ring-blue-500 focus:border-blue-500 mt-6 mb-2" placeholder="Choose a username"></textarea>
            </div>
            <div class="flex justify-center mt-4">
                <div class="relative">
                    <input type="password" style="width: 22rem;" id="password" class="black-placeholder text-whiteblock p-2.5 pl-4 resize-none font-ubuntu text-blacktext bg-[#F2EDF6] border-b-2 border-[#303030] rounded-t-md focus:ring-blue-500 focus:border-blue-500 mt-2 mb-2" placeholder="Choose your password">
                    <button type="button" class="absolute right-0 top-1/2 mt-0 mr-3 transform -translate-y-1/2" id="togglePassword" onclick="togglePasswordVisibility()">
                        <span id="eyeIcon" style="display: none;">
                            <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="height: 1rem; margin-right: 12px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                        </span>
                    </button>
                </div>
            </div>
            <div class="flex justify-center mt-2">
                <p id="lengthRequirement" class="font-lato text-sm font-bold text-blacktext">Must be at least 8 characters long</p>
            </div>
            <div class="flex justify-center">
                <p id="numbersLettersRequirement" class="font-lato text-sm font-bold text-blacktext">Must include numbers and letters</p>
            </div>
        <div class="flex flex-col w-2/5 mx-auto mt-8">
            <button type="button" id="submitButton" class="mt-2 text-[#878787] bg-[#CCCCCC] focus:ring-4 focus:outline-none focus:ring-[#4285F4]/50 font-bold font-ubuntu rounded-lg text-2xl py-2.5 text-center inline-flex mx-auto px-6 dark:focus:ring-[#4285F4]/55 mb-2" style="cursor: not-allowed; pointer-events: none;">
                GO TO NEXT STEP
            </button>
        </div>
    </div>
</div>

{% endblock %}

{% block javascripts %}
<script>
    function checkInput() {
        const textarea = document.getElementById('message');
        const passwordInput = document.getElementById('password');
        const submitButton = document.getElementById('submitButton');
        const eyeIcon = document.getElementById('eyeIcon');

        let usernameValid = textarea.value.trim() !== '';
        let passwordValid = checkPasswordRequirements();

        if (usernameValid && passwordValid) {
            submitButton.style.backgroundColor = '#7D00E2';
            submitButton.style.color = '#FFFFFF';
            submitButton.style.cursor = 'pointer';
            submitButton.style.pointerEvents = 'auto';
            submitButton.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.24), 0 4px 6px rgba(0, 0, 0, 0.12)';
            submitButton.onclick = () => {
                window.location.href = '/onboarding2';
            };
        } else {
            submitButton.style.backgroundColor = '#CCCCCC';
            submitButton.style.color = '#878787';
            submitButton.style.cursor = 'not-allowed';
            submitButton.style.pointerEvents = 'none';
            submitButton.style.boxShadow = 'none';
            submitButton.onclick = null;
        }

        updatePasswordConditions(); // Add this line to update password conditions
    }
    function togglePasswordVisibility() {
        const passwordInput = document.getElementById('password');
        const eyeIcon = document.getElementById('eyeIcon');

        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            eyeIcon.innerHTML = `
                <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="height: 1rem; margin-right: 12px;">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"></path>
                </svg>
            `;
        } else {
            passwordInput.type = 'password';
            eyeIcon.innerHTML = `
                <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="height: 1rem; margin-right: 12px;">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
            `;
        }
    }
    function checkPasswordRequirements() {
        const passwordInput = document.getElementById('password');
        const lengthRequirement = document.getElementById('lengthRequirement');
        const numbersLettersRequirement = document.getElementById('numbersLettersRequirement');

        let lengthValid = false;
        let numbersLettersValid = false;

        if (passwordInput.value.length >= 8) {
            lengthRequirement.classList.add('text-green-500');
            lengthRequirement.classList.remove('text-red-500');
            lengthValid = true;
        } else {
            lengthRequirement.classList.add('text-red-500');
            lengthRequirement.classList.remove('text-green-500');
        }

        if (/\d/.test(passwordInput.value) && /[a-zA-Z]/.test(passwordInput.value)) {
            numbersLettersRequirement.classList.add('text-green-500');
            numbersLettersRequirement.classList.remove('text-red-500');
            numbersLettersValid = true;
        } else {
            numbersLettersRequirement.classList.add('text-red-500');
            numbersLettersRequirement.classList.remove('text-green-500');
        }

        return lengthValid && numbersLettersValid;
    }
    function updatePasswordConditions() {
        const passwordInput = document.getElementById('password');
        const eyeIcon = document.getElementById('eyeIcon');

        if (passwordInput.value.trim() !== '') {
            eyeIcon.style.display = 'block';
        } else {
            eyeIcon.style.display = 'none';
        }

        checkInput();
    }
    document.addEventListener('DOMContentLoaded', function () {
        const textarea = document.getElementById('message');
        const passwordInput = document.getElementById('password');

        textarea.addEventListener('input', checkInput);
        passwordInput.addEventListener('input', checkInput);
    });
</script>
{% endblock %}


